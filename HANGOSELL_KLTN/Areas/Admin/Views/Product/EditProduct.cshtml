@model HANGOSELL_KLTN.Models.EF.ModelDataset

@{
    ViewData["Title"] = "Edit Product";
    Layout = "~/Areas/Admin/Views/Shared/_LayoutAdmin.cshtml";
}

<div class="page-wrapper">
    <div class="content container-fluid">
        <div class="page-header">
            <div class="row align-items-center">
                <div class="col">
                    <h3 class="page-title">Edit Product</h3>
                    <ul class="breadcrumb">
                        <li class="breadcrumb-item"><a href="/Admin/Product">Product</a></li>
                        <li class="breadcrumb-item active">Edit Product</li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <div class="card-body">
                    <form action="/Admin/Product/Edit" method="post" enctype="multipart/form-data">
                        <input type="hidden" asp-for="@Model.product.Id" class="form-control" id="Id" name="Id" value="@Model.product.Id" />

                        <div class="row">
                            <div class="col-12 col-sm-6">
                                <div class="form-group local-forms">
                                    <label asp-for="@Model.product.Title" class="form-label">Title</label>
                                    <input asp-for="@Model.product.Title" class="form-control" id="Title" name="Title" value="@Model.product.Title" />
                                    <span asp-validation-for="@Model.product.Title" class="text-danger"></span>
                                </div>
                            </div>

                            <div class="col-12 col-sm-6">
                                <div class="form-group local-forms">
                                    <label asp-for="@Model.product.ProductCode" class="form-label">Product Code</label>
                                    <input asp-for="@Model.product.ProductCode" class="form-control" id="ProductCode" name="ProductCode" value="@Model.product.ProductCode" />
                                    <span asp-validation-for="@Model.product.ProductCode" class="text-danger"></span>
                                </div>
                            </div>

                            <div class="col-12 col-sm-6">
                                <div class="form-group local-forms">
                                    <label asp-for="@Model.product.ProductCategoryId" class="form-label">Product Category</label>
                                    <select asp-for="@Model.product.ProductCategoryId" class="form-control select" id="ProductCategoryId" name="ProductCategoryId">
                                        <!-- Populate options dynamically from categories -->
                                        @foreach (var category in Model.categories)
                                        {
                                            <option value="@category.Id"> @category.Title </option>
                                        }
                                    </select>
                                    <span asp-validation-for="@Model.product.ProductCategoryId" class="text-danger"></span>
                                </div>
                            </div>

                            <div class="col-12 col-sm-6">
                                <div class="form-group local-forms">
                                    <label asp-for="@Model.product.Description" class="form-label">Description</label>
                                    <input asp-for="@Model.product.Description" class="form-control" id="Description" name="Description" value="@Model.product.Description"></input>
                                    <span asp-validation-for="@Model.product.Description" class="text-danger"></span>
                                </div>
                            </div>

                            <div class="col-12 col-sm-6">
                                <div class="row">
                                    <div class="col-11">
                                        <div class="form-group local-forms">
                                            <label>Image <span class="login-danger">*</span></label>
                                            <input type="file" id="Image" name="Image" class="form-control" style="height: 45px;" value="@Model.product.Image">
                                        </div>
                                    </div>
                                    <div class="col-1">
                                        <div class="user-img" id="prenone" style="margin-left: -20px;height: 45px;">
                                            <img class="rounded-circle" src="~/@Model.product.Image" id="prenoneImg">
                                        </div>
                                        <div class="user-img" id="preview" style="margin-left: -20px;height: 45px; display:none;">
                                            <img class="rounded-circle" id="previewImg">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <script>
                                document.getElementById('image').addEventListener('change', function (event) {
                                    const file = event.target.files[0];
                                    if (file) {
                                        const reader = new FileReader();
                                        reader.onload = function (e) {
                                            const preview = document.getElementById('previewImg');
                                            preview.src = e.target.result;
                                            preview.parentElement.style.display = 'block';
                                            const prenone = document.getElementById('prenoneImg');
                                            prenone.parentElement.style.display = 'none';
                                        };
                                        reader.readAsDataURL(file);
                                    }
                                });
                            </script>

                            <div class="col-12 col-sm-6">
                                <div class="form-group local-forms">
                                    <label asp-for="@Model.product.Quantity" class="form-label">Quantity</label>
                                    <input asp-for="@Model.product.Quantity" class="form-control" id="Quantity" name="Quantity" type="number" value="@Model.product.Quantity" />
                                    <span asp-validation-for="@Model.product.Quantity" class="text-danger"></span>
                                </div>
                            </div>

                            <div class="col-12 col-sm-6">
                                <div class="form-group local-forms">
                                    <label asp-for="@Model.product.Price" class="form-label">Price</label>
                                    <input asp-for="@Model.product.Price" class="form-control" id="Price" name="Price" type="number" step="0.01" value="@Model.product.Price" />
                                    <span asp-validation-for="@Model.product.Price" class="text-danger"></span>
                                </div>
                            </div>

                            <div class="col-12 col-sm-6">
                                <div class="form-group local-forms">
                                    <label asp-for="@Model.product.PriceSale" class="form-label">Sale Price</label>
                                    <input asp-for="@Model.product.PriceSale" class="form-control" id="PriceSale" name="PriceSale" type="number" step="0.01" value="@Model.product.PriceSale" />
                                    <span asp-validation-for="@Model.product.PriceSale" class="text-danger"></span>
                                </div>
                            </div>


                            <div class="col-12 col-sm-6">
                                <div class="form-group local-forms">
                                    <label asp-for="@Model.product.SeoTitle" class="form-label">SEO Title</label>
                                    <input asp-for="@Model.product.SeoTitle" class="form-control" id="SeoTitle" name="SeoTitle" value="@Model.product.SeoTitle" />
                                    <span asp-validation-for="@Model.product.SeoTitle" class="text-danger"></span>
                                </div>
                            </div>

                            <div class="col-12 col-sm-6">
                                <div class="form-group local-forms">
                                    <label asp-for="@Model.product.SeoKeyword" class="form-label">SEO Keyword</label>
                                    <input asp-for="@Model.product.SeoKeyword" class="form-control" id="SeoKeyword" name="SeoKeyword" value="@Model.product.SeoKeyword" />
                                    <span asp-validation-for="@Model.product.SeoKeyword" class="text-danger"></span>
                                </div>
                            </div>

                            <div class="col-12 col-sm-6">
                                <div class="form-group local-forms">
                                    <label asp-for="@Model.product.SeoDescription" class="form-label">SEO Description</label>
                                    <input asp-for="@Model.product.SeoDescription" class="form-control" id="SeoDescription" name="SeoDescription" value="@Model.product.SeoDescription"></input>
                                    <span asp-validation-for="@Model.product.SeoDescription" class="text-danger"></span>
                                </div>
                            </div>

                            <div class="col-12 col-sm-6">
                                <div class="row">
                                    <div class="col-6 ">
                                        <div class="form-check">
                                            <input asp-for="@Model.product.IsHome" class="form-check-input" id="IsHome" name="IsHome" type="checkbox" />
                                            <label class="form-check-label" for="IsHome">Is Home</label>
                                        </div>
                                        <div class="form-check">
                                            <input asp-for="@Model.product.IsSale" class="form-check-input" id="IsSale" name="IsSale" type="checkbox" />
                                            <label class="form-check-label" for="IsSale">Is Sale</label>
                                        </div>
                                    </div>

                                    <div class="col-6 ">
                                        <div class="form-check">
                                            <input asp-for="@Model.product.IsFeature" class="form-check-input" id="IsFeature" name="IsFeature" type="checkbox" />
                                            <label class="form-check-label" for="IsFeature">Is Feature</label>
                                        </div>
                                        <div class="form-check">
                                            <input asp-for="@Model.product.IsHot" class="form-check-input" id="IsHot" name="IsHot" type="checkbox" />
                                            <label class="form-check-label" for="IsHot">Is Hot</label>
                                        </div>
                                    </div>
                                </div>
                            </div>


                            <div class="mb-3">
                                <div class="student-submit">
                                    <button type="submit" class="btn btn-primary">Save Changes</button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

